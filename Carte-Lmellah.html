<!DOCTYPE html>
<html>
<head>
	
	<title>Carte</title>
	<!-- Leaflet -->
    <link rel="stylesheet" href="css/leaflet.css" />
    <script src="js/leaflet.js"></script>
	<script src='js/Leaflet.LocationShare.js'></script>
	
	<!-- Leaflet ruler -->
	<link rel="stylesheet" href="css/leaflet-ruler.css" />
    <script src="js/leaflet-ruler.js"></script>
	<!-- Leaflet fullscreen -->
	<script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-fullscreen/v1.0.1/Leaflet.fullscreen.min.js'></script>
	<link href='https://api.mapbox.com/mapbox.js/plugins/leaflet-fullscreen/v1.0.1/leaflet.fullscreen.css' rel='stylesheet' />

	<!-- JS of data -->
	<script type="text/javascript" src="js/chemins_fer.js"></script>
	<script type="text/javascript" src="js/regions.js"></script>
	<script type="text/javascript" src="js/routes_nationales.js"></script>
	<script type="text/javascript" src="js/autoroute.js"></script>
	<script type="text/javascript" src="js/ligne-tram.js"></script>
	<script type="text/javascript" src="js/mosque.js"></script>
	<script type="text/javascript" src="js/station-tram.js"></script>

	<!-- Pour la bare de nav -->
	
    <link rel="stylesheet" href="css/barre de navigation map.css" />
	<link href="https://fonts.googleapis.com/css2?family=Advent+Pro:wght@300&family=Dancing+Script&display=swap" rel="stylesheet">
    

	<!-- Mouse Coordinate -->
	<link rel="stylesheet" href="css/Control.Coordinates.css" />
    <script src="js/Control.Coordinates.js"></script>


	<!-- Theme -->
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" />


	<!-- Location of the user -->

	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
	<script src="js/L.Control.Locate.min.js" charset="utf-8"></script>

	<!-- Search bar-->

	<link rel="stylesheet" href="css/Control.Geocoder.css" />
	<script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>

	<!-- Turf calcul area-->

	<script src="https://cdn.jsdelivr.net/npm/@turf/turf@5/turf.min.js"></script>

	<!-- Geocoder  -->
	
	<link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" />
	<script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>

	<!-- Leaflet routing machine -->

	<link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.css" />
	<script src="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.js"></script>

	<!-- Style de la carte -->

	<style>
		#map {
			width: 100%;
			height: 458px;
		}
		.info {
		    padding: 0px;
		    font: 14px/16px Arial, Helvetica, sans-serif;
		    background: black;
		    box-shadow: 0 0 15px rgba(0,0,0,0.2);
		    border-radius: 5px;
		}
		#legende{
			width:100%;
			}
		
	</style>
	
</head>
<body>

	<section> 
		<header id="header" class="d-flex align-items-center">
			<div class="container d-flex align-items-center justify-content-between">
		
			  <a id="logo" href="index.html" class="logo mr-auto"><h1>PatriVisit</h1></a>
		<nav id="navbar" class="navbar">
			<ul>
			  <li><a class="nav-link scrollto active" href="index.html"target="_blank">Acceuil</a></li>
			  <li><a class="nav-link scrollto" href="Lamap.html" target="_blank">Mappe</a></li>
		  
			  <li class="dropdown"><a href="#"><span>Villes</span> <i class="bi bi-chevron-down"></i></a>
				<ul>
				  <li><a href="Rabat/Rabat.html" target="_blank">Rabat</a></li>
				  <li class="dropdown"><a href="Essaouira/Essaouira.html"><span>Essaouira</span> <i class="bi bi-chevron-right"></i></a>
				  </li>
				</ul>
			  </li>
			  <li><a class="nav-link scrollto" href="index.html">Contact</a></li>
			</ul>
			<i class="bi bi-list mobile-nav-toggle"></i>
		  </nav><!-- .navbar -->     
		</div>
	</header>
	<!-- End Header -->       
</section>	

<section>
<div id='map'></div>

<script type="text/javascript">
   var map = L.map('map').setView([31.5140, -9.7690], 5.5)
	
   map.addControl(new L.Control.Fullscreen());

		window.onload=function(){
            console.log('page chargée');

			var mosque = new L.Icon({
  			iconUrl: 'icon/mosque.png',
  			iconSize: [45, 40],
			});
			var mur = new L.Icon({
  			iconUrl: 'icon/mur.png',
  			iconSize: [45, 40],
			});
			var bab = new L.Icon({
  			iconUrl: 'icon/bab.png',
  			iconSize: [45, 40],
			});
		
		

			var marker = L.marker([34.007016739204474, -6.848212943099647],{icon: bab}).addTo(map);
            	marker.bindPopup('Cliquez sur <a href="Rabat/Babkech.html">Bab Marrakech <br> </a> pour afficher la viste virtuelle.');

			var marker = L.marker([31.5158, -9.7670],{icon: mur}).addTo(map);
            	marker.bindPopup('<center> <strong> Lmellah, </strong> quartier situé  à l’ancienne Medina d’Essaouira. <br>  Lmellah signifie le quartier des juifs. <br> Son nom est dérivé du mot «sel» en arabe, et est appelé ainsi parce que les Juifs se sont consacrés en général aux transports et aux entreprises de sel.<br> Pour visiter le quartier,  <a href="https://webobook.com/public/61520aae51650077f0128ce2,en?ap=true&si=true&sm=false&sp=true&sfr=false&sl=false&sop=false&" target="_blank"> Cliquez ici  </a>').openPopup();

			var marker = L.marker([31.513329, -9.766389 ],{icon: mur}).addTo(map);
            	marker.bindPopup(' Cliquez sur <a href="https://webobook.com/public/61262ac49864597e6658b0a2,en?ap=false&si=false&sm=false&sp=true&sfr=false&sl=false&sop=false&" target="_blank"> <br> pour visiter Chbanat </a>');


			var marker = L.marker([33.582778 , -7.615833], {icon: mosque}).addTo(map);
            	marker.bindPopup('<center> <strong> Église Notre Dame-de Lourdes </strong> située à Casablanca<br> C"est une église paroissiale catholique contruite en 1954 par Achille Dangleterre et l"ingénieur Gaston Zimmer<br> <br> <img src="images/eglise.jpg"/></center>');

			var marker = L.marker([33.608749 , -7.632601], {icon: mosque}).addTo(map);
            	marker.bindPopup('<center> <strong> Mosqué Hassan II </strong> est située à Casablanca <br> Elle est sur le bord de la mer. Sa construction a débuté  en 1986 et son inauguration a eu lieu en 1993. La mosquée Hassan II est d"une hauteur de 210 mètres  et comporte au delà d"une très grande salle de prières, une école coranique, un musée, une bibliothèque, salle d’ablutions et des bains. <br> <br> <img src="images/mosqué hassan2.jpg"/></center>');

			var marker = L.marker([34.061111 , -4.977778], {icon: mur}).addTo(map);
            	marker.bindPopup('<center> <strong> L"ancienne médina de Fès </strong> est une médina marocaine, cœur historique de Fès, inscrite depuis 1981 au patrimoine mondial de l"Unesco.<br>Fès el-Bali est le plus vieux de ses quartiers. <br> <img src="images/mosqué hassan2.jpg"/></center>');

			var marker = L.marker([34.062222 , - 4.982778], {icon: mosque}).addTo(map);
            	marker.bindPopup('<center> <strong> La Médersa Bou Inania en arabe المدرسة أبو عنانية بفاس</strong> <br> Pas loin du Bab Boujloud, elle est édifié entre 1350 et 1355 sous la dynastie des Mérinides.<br> <br> <img src="images/MedersaBouInania.jpg"/></center>');

			var marker = L.marker([33.880556, -5.557500], {icon: mur}).addTo(map);
            	marker.bindPopup('<center> <strong> Hri Souani</strong> <br> c"est monument historique situé à Meknès qui servait principalement à stocker les denrées alimentaires. Il a été construit par Moulay Ismaïl au 18ème siècle.<br> <br> <img src="images/hrisouani.jpg"/></center>');

			var marker = L.marker([33.891111,-5.564722], {icon: mur}).addTo(map);
            	marker.bindPopup('<center> <strong> La prison de Qara</strong> <br> est une vaste prison souterraine qui s"étend sur des kilomètres. Elle a été construite au 18ème siècle sous le règne du sultan Ismaïl dans la ville de Meknès, à l"intérieur de la kasbah ismaélienne.<br> Son nom lui vient d"un prisonnier portugais qui a racheté sa liberté au sultan en échange de la construction de la prison.<br> <img src="images/quara.jpg"/></center>');

			var marker = L.marker([32.015278, -6.719722], {icon: bab}).addTo(map);
            	marker.bindPopup('<center> <strong> Les cascades d"Ouzoud</strong> <br> sont des chutes spectaculaire située dans la régions de Beni Mellal-Khénifra d"environ 110 m de haut. <br> Ces chutes sont considérées parmi les plus élevées et les plus belles du Maroc,souvent dominées par un arc-en-ciel.<br> Ce site, touristique, calme et naturel, propose de nombreux campings, lieux de baignade, petits restaurants en terrasse de cuisine berbère et boutiques d"artisanat marocain du moyen Atlas le long d"un passage piéton qui descend au pied de la cascade.<br> Une communauté de macaques berbères en liberté, habitués au tourisme, assurent une partie de l"animation du site.<br> <img src="images/ouzoud.jpg"/></center>');
			var marker = L.marker([31.047220, -7.128890], {icon: mur}).addTo(map);
            	marker.bindPopup('<center> <strong> Ait Benhaddou </strong> <br> Situé dans le sud du maroc dans la province de Ouarzazat, est un site culturel et historique marocain.<br> Il est le plus célèbre  des ksour de la vallé de l"Ounila et est un exemple frappant de l"architecture du sud du maroc.<br> <img src="images/aitben.jpg"/></center>');

			var marker = L.marker([34.073890, -5.556940], {icon: bab}).addTo(map);
            	marker.bindPopup('<center> <strong> Volubilis</strong> <br> Partiellement découverte de nos jours,un avant-poste important de l"Empire romain et a été ornée de nombreux beaux monuments.<br> Etalée sur 42 hectares, ses vestiges archéologiques  témoignent de plusieurs civilisations.<br>Volubilis est d"une importance exceptionnelle en ce qu"elle montre le développement urbain et la romanisation aux frontières de l"empire romain. <br><br><img src="images/Volubilis.jpg"/></center>');

			var marker = L.marker([35.570830, -5.366670], {icon: mur}).addTo(map);
            	marker.bindPopup('<center> <strong> Médina de Tetouan </strong> <br> Ancienement appelée "Titawin".Elle est l"une des plus petites médinas marocaines et son architecture est influencée par l"art andalous.<br> Tétouan a eu une importance particulière durant la période islamique comme principal point de jonction entre le Maroc et l"Andalousie.<br><br><img src="images/tetouan.jpg"/></center>');

			var marker = L.marker([35.168611,-5.261389], {icon: mosque}).addTo(map);
            	marker.bindPopup('<center> <strong> La Kasbah de Chefchaouen </strong> <br> est construite au 15ème siècle par Rachid Ben Ali. Elle contient aujourd"hui un musée ethnologique. Cette majustueuse kasbah est caractérisé par sa tour donnant sur des vues panoramiques de la ville.<br><br><img src="images/chefchaouen.jpg"/></center>');

			var marker = L.marker([31.624444,-7.993056], {icon: mosque}).addTo(map);
            	marker.bindPopup('<center> <strong>Koutoubia </strong> <br> est la plus grande mosquée de la ville construite au 12ème siècle à Marrakech.   Son architecture et son décor ascétique reflètent l"art des Almohades.<br><br><img src="images/koutoubia.jpg"/></center>');

			var marker = L.marker([31.621389,-7.981667], {icon: mosque}).addTo(map);
            	marker.bindPopup('<center> <strong> Ksar l Bahia </strong> <br> est un ancien palais du 19ème siècle de huit hectares de style islamique,situé à  Marrakech. Actuellement, ksar l Bahia est un musée , un des chefs-d"oeuvre de l"architecture marocaine et un des monuments touristique et culturel du pays.<br><br><img src="images/bahia.jpg"/></center>');

			var marker = L.marker([31.625833,-7.989167], {icon: mur}).addTo(map);
            	marker.bindPopup('<center> <strong> Jamaa El Fena </strong> <br> est une célèbre place publique à la médina de Marrakech au Maroc. Elle est populaire et  animée surtout la nuit et attire des millions de visiteurs chaque année.  <br>« L"espace culturel de la place Jemaa el-Fna » est inscrit patrimoine culturel immatériel depuis 2008 et au patrimoine mondial depuis 1985 par l"Unesco2.<br><br><img src="images/fna.jpeg"/></center>');

			var marker = L.marker([34.006667,-6.820278], {icon: mur}).addTo(map);
            	marker.bindPopup('<center> <strong> Chellah</strong>');

			var marker = L.marker([34.031944,-6.836111], {icon: bab}).addTo(map);
            	marker.bindPopup('<center> <strong> Oudaya </strong> <br> La kasbah des Oudayas est un ancien camp militaire fortifié situé à Rabat et bâti au 12ème siècle.<br>Depuis 2012, la kasbah est inscrite sur la liste du patrimoine mondial de l"Unesco <br><br><img src="images/Rabat.png"/></center>');

			var marker = L.marker([34.040000,-6.827222], {icon: mosque}).addTo(map);
            	marker.bindPopup('<center> <strong> Médersa mérinide de Salé </strong> <br>  est une ancienne médersa bâtie dans la ville de Salé,. Elle fut édifiée entre 1333 et 1341 par le sultan Abu al-Hasan ben Uthman  sous la dynastie des Mérinides.<br><br><img src="images/sale.jpg"/></center>');

			var marker = L.marker([35.079602, -2.214755], {icon: bab}).addTo(map);
            	marker.bindPopup('<center> <strong> La kasbah de Saidia </strong> <br> est situé dans la ville de Saidia, surnomée perle bleu, au Maroc.<br> Elle a été construite,en forme de carré de 100 mètres de côte environ, en 1883.</center>');

			var marker = L.marker([31.308095, -4.250765], {icon: mosque}).addTo(map);
            	marker.bindPopup('<center> <strong> Ksar El Faidha </strong> <br> fut le premier palais des rois alaouites à Risani.<br> Ksar el Faidha est actuellement un musée.<br><br><img src="images/rissani.jpeg"/></center>');



			var polygon = L.polygon([
					[31.514116,-9.768203],
    				[31.514847,-9.769045],
    				[31.5158,-9.767678],
					[31.516095,-9.767692],
					[31.516766,-9.765946],
					[31.516187,-9.765694],
					[31.516023,-9.765770],
					[31.516021,-9.765849],
					[31.516058,-9.765947]		
			]).addTo(map);
			map.fitBounds(polygon.getBounds());
			


			var polygon = L.polygon([
					[31.514117, -9.768205],
    				[31.514515, -9.767750],
    				[31.514231, -9.767452],
					[31.514075, -9.767141],
					[31.513951, -9.766563],
					[31.513883, -9.766495],
					[31.513860, -9.766237],
					[31.513778, -9.765870],
					[31.513872, -9.765144],
					[31.512639, -9.764636],
					[31.511794, -9.765754]

			]).addTo(map);
			
			
         		
				

 /*************tracer l'itinéraire *******************/

			L.Routing.control({
				geocoder: L.Control.Geocoder.nominatim()
			}).addTo(map)
		}
	
 /*************règle *******************/
		L.control.ruler().addTo(map);


		
	function Monstyle(feature) {
		return {
			weight: 2,
			opacity: 1,
			color: 'red',
			dashArray: '3',
			fillOpacity: 0.7,
			fillColor: '#ff2f52'
		};
	}

	function highlightFeature(e) {
	    var layer = e.target;

	    layer.setStyle({
	        weight: 5,
	        color: '#666',
	        dashArray: '',
	        fillOpacity: 0.7
	    });

	    if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
	        layer.bringToFront();
	    }
	        info.update(layer.feature.properties);

	}

	function resetHighlight(e) {
    	geojson.resetStyle(e.target);
    	    info.update();

	}
	function zoomToFeature(e) {
    map.fitBounds(e.target.getBounds());
}
	function onEachFeature(feature, layer) {
    layer.on({
        mouseover: highlightFeature,
        mouseout: resetHighlight,
        click: zoomToFeature
    });
}



/****************************Couche GeoJSON****************************/

var info = L.control();


	var geojson1 = L.geoJson(region, {
		style: Monstyle,
	    onEachFeature:  function (feature, layer) {
			area = (turf.area(feature) / 1000000).toFixed(2);
			layer.bindPopup(`<b>Area: </b> ${area}`)
        }

});
	var geojson2 = L.geoJson(cheminfer, {
		style: Monstyle,
	    onEachFeature: onEachFeature,
});
	var geojson3 = L.geoJson(routesnatio, {
		style: Monstyle,
	    onEachFeature: onEachFeature,
});
	var geojson4 = L.geoJson(autoroute, {
		style: Monstyle,
	    onEachFeature: onEachFeature,
});
	var geojson5 = L.geoJson(ligne, {
		style: Monstyle,
	    onEachFeature: onEachFeature,
});
	var geojson6 = L.geoJson(stations, {
		style: Monstyle,
	    onEachFeature: onEachFeature,
});



/*******************Carte****************************************/

	var googleSat = L.tileLayer('http://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}',{
    	minZoom: -1,
		maxZoom: 40,
    	subdomains:['mt0','mt1','mt2','mt3']
}).addTo(map);

	var OpenStreetMap_DE = L.tileLayer('https://{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png', {
		minZoom: -1,
		maxZoom: 40,
		attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
	}).addTo(map);;

	


/**********************Controle layer*******************/
    var baseMaps = {    
	"Satellite" : googleSat,
	"OpenStreetMap_DE": OpenStreetMap_DE,  
};
	
	var overlayMaps = {
	
    "Régions": geojson1,
    "Chemins de fer": geojson2,
    "Réseaux hydrographique": geojson3,
	"Autoroutes": geojson4,
	"Lignes de tram": geojson5,
	"Stations de tram": geojson6
};


/**********************Controle layer*******************/
L.control.layers(baseMaps, overlayMaps).addTo(map);

/**********************Mouse coordinate ******************/
var c = new L.Control.Coordinates(); 

	c.addTo(map);

	map.on('click', function(e) {
		c.setCoordinates(e);
	});

/********************** Location of the user******************/

L.control.locate().addTo(map);

/**********************Search bar******************/

L.Control.geocoder().addTo(map);

</script>
<div>
	<img id="legende" src="images/Légende.png" alt="Légende">
</div>
</section>


</body>
</html>

